
{% extends 'base.html' %}

{% block personaljs %}
{% load staticfiles %}
<script type='text/javascript' src="{% static 'js/Chart.js' %}"></script> 
{% endblock %}


{% block content %}



<div class="container">


<div class="row">
	<div id="lista-connessioni" class="col-xs-12">
		<h3>CONNESSIONE UTENTI</h3>
		<table class="table table-striped">
			<tr>
				<td>UTENTE</td>
				<td>ULTIMA CONNESSIONE</td>
				<td>TOT. Ordini</td>
			</tr>
			{% for u in utente_list%}
			<tr>
				<td>{{u.username}}</td>
				<td>{{u.last_login}}</td>
				<td>{{u.order_set.all.count}}</td>
			</tr>
			{% endfor %}
		</table>
	</div>
</div>




<canvas id="myChart" width="400" height="400"></canvas>
<script>

var name = [];
var da = [];

{% for u in utente_list %}
name.put("{{u.username}}"),
da.put("{{u.order_set.all.count}}"),
{% endfor %}

console.log("lista", name);
console.log("lista", da);

var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: name,
        datasets: [{
            label: '# of Votes',
            data: da,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>



</div><!-- container -->


{% endblock %}

