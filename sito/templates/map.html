{% extends 'base.html' %}



{% block personaljs %} 
<style type="text/css">
#map {
	width: 100%;
	height: 500px;
}
</style>
{% endblock %}


{% block content %}


<section id="customer-map">

	<div id="map"></div>


    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 5,
          center: {lat: 45.5964546, lng: 9.8721731}
        });
        var geocoder = new google.maps.Geocoder();
        // creo la funzione geocodeadress (sotto)
        $(document).ready(function() {
            geocodeAddress(geocoder, map);
        })
      } // end function init map
      


      function geocodeAddress(geocoder, resultsMap) {
        {% for fat in fatturazione_list %}
        
        var address = "{{fat.indirizzo}} - {{fat.cap}} {{fat.citta}}";
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
        
        {% endfor %}
      } // endfunction geocodeAddredd


    </script>
    

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvxv0uaw6G2O0Nbjdr8C9BrnoBp32Y_Tc&callback=initMap">
    </script>


</section>

{% endblock %}